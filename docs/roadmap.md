# 開発ロードマップ

## 開発アプローチ

**コンセプト: 実用機能ファースト**

AI機能などの具体的な価値提供機能を作りながら、必要に応じてコア機能を段階的に完成させていくアプローチを採用します。

```
従来型アプローチ (X):
  Phase 1 → Phase 2 → Phase 3 → Phase 4
  (完璧なインフラ構築後に機能実装)

採用アプローチ (✓):
  具体機能の開発 → 必要なコア機能の拡充 → 繰り返し
  (実用機能を作りながらインフラを強化)
```

---

## Iteration 1: AIワークフロー自動生成（現在）

**ゴール**: クライアントが日本語で「こういう自動化がしたい」と入力すると、n8nワークフローが自動生成される

### 実装する具体機能
- 🎯 自然言語からワークフロー生成 (Claude API統合)
- 🎯 業種別プリセットからのカスタマイズ提案
- 🎯 生成されたワークフローの即時デプロイ

### 必要となるコア機能の拡充
- ⚙️ n8n API 統合強化（ワークフロー CRUD）
- ⚙️ Claude API クライアント実装
- ⚙️ プロンプトエンジニアリング（業種×ユースケース）
- ⚙️ クライアント用ワークフロー自動導入の完成

### 成果物
- Rails API: `/api/workflows/generate` エンドポイント
- n8n 統合モジュール
- 業種別プロンプトテンプレート

---

## Iteration 2: 現場報告自動仕分けサービス

**ゴール**: 現場スタッフが領収書や清掃完了写真・動画をLINEやメールで送信すると、AIが内容を理解して自動的に仕分け・記録

### 実装する具体機能
- 📸 マルチチャネル受信（LINE Bot、メール、Mattermost）
- 📸 Claude Vision API による画像・動画分析
  - 領収書: 金額、日付、カテゴリを自動抽出
  - 清掃写真: Before/After 判定、場所特定
  - 作業動画: 作業内容の要約生成
- 📸 自動仕分けルール適用
  - 経費申請データベースへの登録
  - 清掃チェックリストへの記録
  - 異常検知（領収書の重複、未完了作業など）
- 📸 確認通知（Mattermost または LINE で結果送信）

### ユースケース例

**ホテル業**: 清掃スタッフが各客室の清掃完了写真をLINEで送信
- → AIが部屋番号を認識
- → 清掃状態を判定（OK/要再確認）
- → フロントに自動通知

**飲食店**: スタッフが仕入れ時の領収書をスマホで撮影して送信
- → AIが金額・品目・店名を抽出
- → 経費データベースに自動登録
- → 月次レポートに反映

**ツアー会社**: ガイドがツアー中の写真をメール送信
- → AIがツアー名と参加者数を推測
- → 写真をアルバムに自動整理
- → SNS投稿用に最良の写真を選定

### 必要となるコア機能の拡充
- ⚙️ LINE Bot SDK 統合
- ⚙️ メール受信サーバー（Postfix + Rails ActionMailbox）
- ⚙️ Mattermost Webhook 双方向連携
- ⚙️ Claude Vision API クライアント実装
- ⚙️ ファイルストレージ（S3 または MinIO）
- ⚙️ 動画サムネイル生成（FFmpeg）
- ⚙️ OCR機能（領収書テキスト抽出）
- ⚙️ データベーススキーマ設計（経費、清掃記録、作業ログ）

### 成果物
- LINE Bot アプリケーション
- メール受信・解析パイプライン
- Claude Vision 統合 API
- 仕分けルールエンジン
- 管理者向け確認 UI（Rails or Next.js）

---

## Iteration 3: SNS自動投稿AI

**ゴール**: クライアントの商品写真をアップロードすると、AIが魅力的なSNS投稿文を生成して自動投稿

### 実装する具体機能
- 📸 画像アップロード機能
- 📸 Claude Vision API で画像分析
- 📸 SNS投稿文生成（Instagram、X、Facebook対応）
- 📸 n8n経由での自動投稿

### 必要となるコア機能の拡充
- ⚙️ ファイルアップロード・ストレージ（S3 または MinIO）
- ⚙️ 画像処理パイプライン
- ⚙️ SNS API 統合（Instagram、X、Facebook）
- ⚙️ クライアント用 Web UI の初期実装

### 成果物
- 画像分析・投稿生成 API
- SNS 連携 n8n ワークフロー
- シンプルな Web UI

---

## Iteration 4: 在庫最適化アラート

**ゴール**: 飲食店向けに、在庫データから発注最適タイミングをAIが提案

### 実装する具体機能
- 📦 在庫データ入力 UI
- 📦 消費予測モデル
- 📦 発注タイミング提案
- 📦 Mattermost または LINE 通知

### 必要となるコア機能の拡充
- ⚙️ Mattermost Webhook 統合
- ⚙️ LINE Bot 実装（オプション）
- ⚙️ データ入力フォーム（Flutter Web or Next.js）
- ⚙️ 定期実行バッチジョブ

### 成果物
- 在庫管理 Web UI
- 予測アルゴリズム
- 通知システム

---

## Iteration 5: マルチクライアント管理画面

**ゴール**: 社内管理者が全クライアントの状況を一覧で確認・管理できる

### 実装する具体機能
- 🖥️ クライアント一覧ダッシュボード
- 🖥️ プロビジョニング Web UI（CLI の GUI化）
- 🖥️ 使用状況モニタリング（ワークフロー実行回数、ストレージ使用量）
- 🖥️ 課金ステータス管理

### 必要となるコア機能の拡充
- ⚙️ Rails Admin または独自管理画面
- ⚙️ メトリクス収集（Prometheus + Grafana or カスタム実装）
- ⚙️ 課金システム基盤（Stripe 統合準備）

### 成果物
- 管理者ダッシュボード
- モニタリングシステム
- 課金管理基盤

---

## 将来的なスケーラビリティ対応（必要に応じて）

これらは**具体機能の開発中に必要になったタイミング**で実装:

### インフラ強化
- 🔧 Kubernetes 移行（10+ クライアント時）
- 🔧 サブドメイン方式（SEO/ブランディング要求時）
- 🔧 CDN 統合（大容量画像配信時）
- 🔧 マルチリージョン対応（海外展開時）

### セキュリティ強化
- 🔒 SSO/SAML対応（大企業クライアント獲得時）
- 🔒 監査ログ（コンプライアンス要求時）
- 🔒 GDPR対応（欧州展開時）

---

## 現在の進捗状況

✅ **完了**
- マルチテナントアーキテクチャ
- n8n 自動プロビジョニング
- クライアント管理 CLI
- 包括的なドキュメント

🚧 **進行中**
- Iteration 1 準備（AIワークフロー自動生成の設計）

📋 **次のアクション**
1. Claude API 統合の実装
2. n8n REST API クライアント作成
3. シンプルなワークフロー生成プロトタイプ

---

[← README に戻る](../README.md)
